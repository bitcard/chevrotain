clear;
clc;
close all;

TP = [10, 25, 50, 75, 100,
    175, 250, 500, 750, 1000,
    2000, 5000, 10000];

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Latencies 1 REPL
CvRDTy1 = [73.283018, 73.025698, 71.9514768, 72.8064388, 71.652766,
    72.128209, 71.6808584, 72.281974, 72.52434, 73.454389,
    74.340933, 74.5164, 73.66112];
CvRDTn1 = [72.422152, 71.9853502, 72.5746132, 71.5144532, 73.3734178,
    71.650058, 74.4605778, 76.5811312, 82.790108, 86.5519312,
    85.8828398, 81.901679, 83.0491408];
CmRDTo1 = [83.040554, 82.1283464, 78.476636, 77.504514, 78.783752,
    983.543778, 1173.79113, 2925.917868, 3492.92714, 3350.99348,
    5113.13206, 5416.37756, 6398.09332];
Mongo1 = [132.730564, 131.0871, 133.004558, 134.132684, 135.391816,
    136.78463, 145.671216, 145.417334, 152.153396, 232.855928,
    341.802792, 224.81828, 246.587318];

% Consistencies 1 REPL
% CmRDTo1C is 100
Mongo1C = [100, 99.522675, 98.8544164, 99.4749416, 99.1408092,
    97.016706, 91.026252, 80.7637238, 78.520288, 68.8782812,
    67.613364, 67.995224, 67.4224332];

% Merge Time 1 REPL
CvRDTy1M = [6.43263094, 6.6270395, 6.98984324, 6.8931048, 6.87015582,
    7.80677928, 8.3114355, 8.9518782, 8.23229006, 9.28432224,
    8.5454572, 9.7524682, 9.1516675];
CvRDTn1M = [5.04100562, 6.04584734, 6.37939818, 5.72144978, 6.3836108,
    5.0880505, 5.38710072, 5.94505996, 6.24669658, 5.04580412,
    5.07303074, 4.96453326, 4.91414096];

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Latencies 3 REPL
Zero3 = [320.21886, 319.030872, 318.148158, 317.930926, 318.374684,
    320.979948, 319.866648, 323.675518, 322.287316, 320.392268,
    320.464632, 320.805788, 323.002684];
CvRDTy3 = [111.8655688, 111.995843, 111.47861, 112.6526322, 111.786433
    113.1825888, 112.82668, 113.713297, 113.6419856, 114.3651478,
    113.598076, 115.563524, 117.4310088];
CvRDTn3 = [112.90413, 113.1503836, 115.0672832, 116.2146288, 116.679562,
    114.6906168, 116.1433198, 125.956126, 140.56459, 152.907822,
    174.363636, 176.796434, 192.852944];
CmRDTo3 = [325.68871, 329.170378, 326.057822, 325.832348, 325.665002,
    765.017688, 2364.235, 4421.8129]; % 8
Mongo3 = [133.204698, 133.27441, 135.13132, 137.534004, 140.330406,
    153.902632, 250.89568, 820.102022, 1009.11816, 1086.8314,
    1079.91862, 1094.00758, 1092.16256];

% Consistencies 3 REPL
Zero3C = [100, 100, 100, 100, 99.960224,
    99.403344, 98.5282402, 92.5377872, 88.615751, 89.665873,
    85.3142412, 85.4017508, 85.536993];
CmRDTo3C = [100, 100, 100, 100, 100,
    99.952266, 76.5956894, 55.63699]; % 8
Mongo3C = [100, 98.4486862, 98.61575, 98.8544032, 98.5202852,
    93.7231518, 87.1599032, 50.92481825, 48.6873504, 49.1169436,
    48.1622906, 47.5179004, 51.0739852];

% Merge Time 3 REPL
CvRDTy3M = [10.04562553, 11.95016483, 12.90061223, 13.64244213, 13.8473838,
    15.28866253, 14.639018, 13.9061978, 14.5212318, 14.27013453,
    14.10117407, 14.72363583, 14.69385047];
CvRDTn3M = [8.393267133, 8.693889867, 8.7968597, 7.306878353, 8.844309133,
    8.711620567, 8.959048867, 7.87535058, 8.386577733, 8.549704,
    9.046204567, 9.043847667, 9.000981933];

% Merge Time vs Time Interval
t = [100, 250, 500, 1000, 2500, 5000]; % 6
CvRDTy3T = [7.183149707, 7.447596347, 8.269783513,
    9.2851406, 14.69385047, 22.5235036];
CvRDTn3T = [13.8849832, 12.19698067, 12.46759167,
    9.186621747, 9.000981933, 15.62558857];

% CmRDTC Data
len = [3, 5, 10, 20]; %4
CmRDTc3 = [334.01643, 328.751978, 325.745858, 321.567975];
CmRDTc3C = [87.199684, 68.9896568, 68.8941908, 76.84964];

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Latencies 5 REPL
CvRDTy5 = [141.377166, 140.817112, 140.63087, 140.811062, 140.806196,
    142.404218, 141.18949, 140.114192, 140.92358, 141.141076,
    142.108062, 142.063178, 139.6221];
CvRDTn5 = [141.156054, 140.90718, 140.580364, 140.501184, 140.371468,
    141.6674, 142.617074, 139.601298, 141.751744, 142.747344,
    141.77003, 141.201768, 141.521452];
CmRDTo5 = [418.67653, 415.001318, 418.205392, 419.324172, 419.75382,
    618.527528, 1293.33905]; % 7
Mongo5 = [135.092612, 137.426366, 139.222746, 143.652476, 152.013216,
    551.118458, 945.759546, 1171.33482, 1354.55334, 1425.78806,
    1399.95932, 1410.2058, 1403.24758];

% Consistencies 5 REPL
CmRDTo5C = [100, 100, 100, 100, 100,
    98.8496422, 87.2613365]; % 7
Mongo5C = [100, 96.92124, 98.329354, 97.446299, 96.1097868,
    89.260144, 53.8186166, 50.978519, 54.319808, 47.4701668,
    47.1837728, 47.494034, 46.3961816];

% Merge Time 5 REPL
CvRDTy5M = [10.44394, 13.24342, 14.80766, 14.96406, 15.0841,
    16.14114, 15.65872, 16.48828, 15.50448, 15.5364,
    16.1991, 15.94276, 14.95592];
CvRDTn5M = [15.48804, 14.62952, 13.45808, 14.206, 13.09858,
    13.88382, 12.77862, 13.97944, 11.98632, 13.21756,
    13.6516, 13.99104, 13.30088];

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Latencies 7 REPL
CvRDTy7 = [133.713744, 133.458478, 133.679048, 134.239998, 133.910282,
    135.10474, 138.24995, 138.738564, 136.927152, 138.16984,
    137.555964, 135.405558, 135.42901];
CvRDTn7 = [133.636574, 133.35293, 133.499372, 134.015976, 133.946262,
    136.27055, 134.983114, 135.923326, 137.896014, 137.534592,
    137.465664, 138.327644, 141.977404];
CmRDTo7 = [397.07769, 395.608152, 397.082162, 398.524788, 443.885216,
    705.39441]; % 6
Mongo7 = [137.385114, 140.770206, 152.464934, 243.374288, 621.316898,
    1318.3461, 1464.58082, 1712.0592, 1895.23052, 1904.7983,
    1939.2516, 1914.82458, 1939.72538];

% Consistencies 7 REPL
CmRDTo7C = [100, 100, 100, 100, 100,
    96.106376]; % 6
Mongo7C = [100, 96.968968, 97.947492, 95.489262, 93.174228,
    49.856801, 58.544151, 48.5441564, 48.4725556, 47.7804308,
    50.6443918, 49.021477, 50.6921236];

% Merge Time 7 REPL
CvRDTy7M = [11.79804, 13.12444, 14.03222, 14.81464, 15.82536,
    16.03296, 16.3881, 15.89998, 15.82394, 15.4892,
    15.4037, 16.29988, 15.64554];
CvRDTn7M = [17.6702, 15.14638, 14.88958, 14.06956, 13.96534,
    12.161, 10.8672, 13.2498, 12.56872, 13.0205,
    13.31316, 13.61364, 13.358575];

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Latencies 10 REPL
CvRDTy10 = [141.74215, 141.53881, 142.158208, 143.218392, 142.316296,
    144.690614, 145.056054, 145.690672, 143.709034, 149.959364,
    149.301394, 155.318976, 148.350938];
CvRDTn10 = [141.856542, 141.851572, 141.938012, 142.658326, 143.408502,
    144.186282, 144.555324, 144.33353, 147.111588, 145.734894,
    147.137052, 145.54994, 144.655102];
CmRDTo10 = [423.481292, 428.222374, 458.987706, 506.133076, 896.011982]; % 5
Mongo10 = [140.685846, 151.556158, 254.703088, 937.44281, 1137.10558,
    1565.03932, 1630.86094, 1883.94526, 1943.52302, 1990.87586,
    2010.35572, 2035.81298, 1998.40994];

% Consistencies 10 REPL
CmRDTo10C = [100, 100, 100, 100, 99.085918]; % 5
Mongo10C = [100, 97.112171, 96.348451, 45.4892578, 49.474939,
    55.4176604, 54.3914118, 53.484486, 54.9164688, 53.317422,
    51.622913, 51.4558466, 51.0978512];

% Merge Time 10 REPL
CvRDTy10M = [11.91838, 14.4731, 15.69548, 16.08572, 17.33598,
    17.21606, 17.95744, 18.51842, 17.77532, 17.88498,
    18.34452, 17.38704, 18.55124];
CvRDTn10M = [21.80304, 19.44788, 18.68148, 19.76542, 17.2081,
    15.93718, 16.20748, 18.04442, 16.71072, 15.90812,
    17.44472, 17.09554, 15.61974];

% No Delay
NDDelta = [15347988, 6183219, 3215375, 2156089, 1708046,
    943460, 801503, 460752, 329917, 313804,
    174890, 172910, 172897]; % Based on MongoDB
MongoND = [1975.55608, 29.3794724]; % Lat, C
MongoNDDelta = [2995, 1998, 5994, 7995, 10991];
CvRDTyND = [182.987728, 18.31812, 48.2816224] % Lat, Merge, C
CvRDTnND = [179.077932, 16.80458, 52.3627686];
CvRDTnNDDelta = [999, 4996, 11992, 999, 998,
    999, 1998, 998, 4996, 999,
    1999, 4998, 999, 999, 0,
    999, 999, 998, 1001, 999,
    999, 1000, 1000, 998, 998] ; % Plus 5 zeros

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
figure
hold on
plot(TP, LatZero, 'k:', 'LineWidth', 2)
plot(TP, LatCmO, 'k-.', 'LineWidth', 2)
plot(TP, LatCv, 'k-', 'LineWidth', 2)
axis([5 200 80 350])
ax = gca;
ax.FontSize = 14; 
xlabel('Throughput (ops/s)','FontSize',14)
ylabel('Latency (ms)','FontSize',14)
legend('Zero','CmRDT-O','CvRDT',...
    'Location','Best','FontSize',12)
grid on
